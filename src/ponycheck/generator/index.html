



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-ponylang-0.2.1">
    
    
      
        <title>generator.pony - ponycheck</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.a6477f41.css">
      
    
    
      <script src="../../../assets/javascripts/modernizr.6586f7cd.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="" title="ponycheck" class="md-header-nav__button md-logo">
          
            <img src="../../../assets/images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ponycheck
              </span>
              <span class="md-header-nav__topic">
                generator.pony
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../../assets/images/logo.png" width="48" height="48">
      
    </span>
    ponycheck
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="" title="ponycheck" class="md-nav__link">
      ponycheck
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      package ponycheck
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        package ponycheck
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-Randomness/" title="class Randomness" class="md-nav__link">
      class Randomness
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-PropertyLogger/" title="interface PropertyLogger" class="md-nav__link">
      interface PropertyLogger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-PropertyResultNotify/" title="interface PropertyResultNotify" class="md-nav__link">
      interface PropertyResultNotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-PropertyRunner/" title="actor PropertyRunner" class="md-nav__link">
      actor PropertyRunner
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-PropertyHelper/" title="class PropertyHelper" class="md-nav__link">
      class PropertyHelper
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-PropertyParams/" title="class PropertyParams" class="md-nav__link">
      class PropertyParams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-Property1/" title="trait Property1" class="md-nav__link">
      trait Property1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-Poperator/" title="class Poperator" class="md-nav__link">
      class Poperator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-Ponycheck/" title="primitive Ponycheck" class="md-nav__link">
      primitive Ponycheck
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ValueAndShrink/" title="type ValueAndShrink" class="md-nav__link">
      type ValueAndShrink
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-GenerateResult/" title="type GenerateResult" class="md-nav__link">
      type GenerateResult
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-CountdownIter/" title="class CountdownIter" class="md-nav__link">
      class CountdownIter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-GenObj/" title="trait GenObj" class="md-nav__link">
      trait GenObj
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-Generator/" title="class Generator" class="md-nav__link">
      class Generator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-WeightedGenerator/" title="type WeightedGenerator" class="md-nav__link">
      type WeightedGenerator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-Generators/" title="primitive Generators" class="md-nav__link">
      primitive Generators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ForAll/" title="class ForAll" class="md-nav__link">
      class ForAll
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIINUL/" title="primitive ASCIINUL" class="md-nav__link">
      primitive ASCIINUL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIIDigits/" title="primitive ASCIIDigits" class="md-nav__link">
      primitive ASCIIDigits
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIIWhiteSpace/" title="primitive ASCIIWhiteSpace" class="md-nav__link">
      primitive ASCIIWhiteSpace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIIPunctuation/" title="primitive ASCIIPunctuation" class="md-nav__link">
      primitive ASCIIPunctuation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIILettersLower/" title="primitive ASCIILettersLower" class="md-nav__link">
      primitive ASCIILettersLower
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIILettersUpper/" title="primitive ASCIILettersUpper" class="md-nav__link">
      primitive ASCIILettersUpper
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIILetters/" title="primitive ASCIILetters" class="md-nav__link">
      primitive ASCIILetters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIIPrintable/" title="primitive ASCIIPrintable" class="md-nav__link">
      primitive ASCIIPrintable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIINonPrintable/" title="primitive ASCIINonPrintable" class="md-nav__link">
      primitive ASCIINonPrintable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIIAll/" title="primitive ASCIIAll" class="md-nav__link">
      primitive ASCIIAll
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIIAllWithNUL/" title="primitive ASCIIAllWithNUL" class="md-nav__link">
      primitive ASCIIAllWithNUL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponycheck-ASCIIRange/" title="type ASCIIRange" class="md-nav__link">
      type ASCIIRange
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      package assert
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        package assert
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="assert--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="assert-Assert/" title="primitive Assert" class="md-nav__link">
      primitive Assert
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="assert-Fact/" title="primitive Fact" class="md-nav__link">
      primitive Fact
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      package builtin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        package builtin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="builtin--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-U8/" title="primitive U8" class="md-nav__link">
      primitive U8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-U16/" title="primitive U16" class="md-nav__link">
      primitive U16
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-U32/" title="primitive U32" class="md-nav__link">
      primitive U32
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-U64/" title="primitive U64" class="md-nav__link">
      primitive U64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ULong/" title="primitive ULong" class="md-nav__link">
      primitive ULong
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-USize/" title="primitive USize" class="md-nav__link">
      primitive USize
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-U128/" title="primitive U128" class="md-nav__link">
      primitive U128
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Unsigned/" title="type Unsigned" class="md-nav__link">
      type Unsigned
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Stringable/" title="interface Stringable" class="md-nav__link">
      interface Stringable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-String/" title="class String" class="md-nav__link">
      class String
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-StringBytes/" title="class StringBytes" class="md-nav__link">
      class StringBytes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-StringRunes/" title="class StringRunes" class="md-nav__link">
      class StringRunes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-InputNotify/" title="interface InputNotify" class="md-nav__link">
      interface InputNotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-DisposableActor/" title="interface DisposableActor" class="md-nav__link">
      interface DisposableActor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-InputStream/" title="interface InputStream" class="md-nav__link">
      interface InputStream
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Stdin/" title="actor Stdin" class="md-nav__link">
      actor Stdin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ByteSeq/" title="type ByteSeq" class="md-nav__link">
      type ByteSeq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ByteSeqIter/" title="interface ByteSeqIter" class="md-nav__link">
      interface ByteSeqIter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-OutStream/" title="interface OutStream" class="md-nav__link">
      interface OutStream
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-StdStream/" title="actor StdStream" class="md-nav__link">
      actor StdStream
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-SourceLoc/" title="interface SourceLoc" class="md-nav__link">
      interface SourceLoc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-I8/" title="primitive I8" class="md-nav__link">
      primitive I8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-I16/" title="primitive I16" class="md-nav__link">
      primitive I16
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-I32/" title="primitive I32" class="md-nav__link">
      primitive I32
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-I64/" title="primitive I64" class="md-nav__link">
      primitive I64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ILong/" title="primitive ILong" class="md-nav__link">
      primitive ILong
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ISize/" title="primitive ISize" class="md-nav__link">
      primitive ISize
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-I128/" title="primitive I128" class="md-nav__link">
      primitive I128
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Signed/" title="type Signed" class="md-nav__link">
      type Signed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Seq/" title="interface Seq" class="md-nav__link">
      interface Seq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Real/" title="trait Real" class="md-nav__link">
      trait Real
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Integer/" title="trait Integer" class="md-nav__link">
      trait Integer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-FloatingPoint/" title="trait FloatingPoint" class="md-nav__link">
      trait FloatingPoint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Number/" title="type Number" class="md-nav__link">
      type Number
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Int/" title="type Int" class="md-nav__link">
      type Int
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ReadSeq/" title="interface ReadSeq" class="md-nav__link">
      interface ReadSeq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ReadElement/" title="interface ReadElement" class="md-nav__link">
      interface ReadElement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Pointer/" title="struct Pointer" class="md-nav__link">
      struct Pointer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Platform/" title="primitive Platform" class="md-nav__link">
      primitive Platform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-None/" title="primitive None" class="md-nav__link">
      primitive None
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-MaybePointer/" title="struct MaybePointer" class="md-nav__link">
      struct MaybePointer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Iterator/" title="interface Iterator" class="md-nav__link">
      interface Iterator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-F32/" title="primitive F32" class="md-nav__link">
      primitive F32
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-F64/" title="primitive F64" class="md-nav__link">
      primitive F64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Float/" title="type Float" class="md-nav__link">
      type Float
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Env/" title="class Env" class="md-nav__link">
      class Env
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-DoNotOptimise/" title="primitive DoNotOptimise" class="md-nav__link">
      primitive DoNotOptimise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Less/" title="primitive Less" class="md-nav__link">
      primitive Less
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Equal/" title="primitive Equal" class="md-nav__link">
      primitive Equal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Greater/" title="primitive Greater" class="md-nav__link">
      primitive Greater
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Compare/" title="type Compare" class="md-nav__link">
      type Compare
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-HasEq/" title="interface HasEq" class="md-nav__link">
      interface HasEq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Equatable/" title="interface Equatable" class="md-nav__link">
      interface Equatable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Comparable/" title="interface Comparable" class="md-nav__link">
      interface Comparable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Bool/" title="primitive Bool" class="md-nav__link">
      primitive Bool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-AsioEventID/" title="type AsioEventID" class="md-nav__link">
      type AsioEventID
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-AsioEventNotify/" title="interface AsioEventNotify" class="md-nav__link">
      interface AsioEventNotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-AsioEvent/" title="primitive AsioEvent" class="md-nav__link">
      primitive AsioEvent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Array/" title="class Array" class="md-nav__link">
      class Array
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ArrayKeys/" title="class ArrayKeys" class="md-nav__link">
      class ArrayKeys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ArrayValues/" title="class ArrayValues" class="md-nav__link">
      class ArrayValues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-ArrayPairs/" title="class ArrayPairs" class="md-nav__link">
      class ArrayPairs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-Any/" title="interface Any" class="md-nav__link">
      interface Any
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="builtin-AmbientAuth/" title="primitive AmbientAuth" class="md-nav__link">
      primitive AmbientAuth
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      package collections
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        package collections
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="collections--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-Sort/" title="primitive Sort" class="md-nav__link">
      primitive Sort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-Set/" title="type Set" class="md-nav__link">
      type Set
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-SetIs/" title="type SetIs" class="md-nav__link">
      type SetIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-HashSet/" title="class HashSet" class="md-nav__link">
      class HashSet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-SetValues/" title="class SetValues" class="md-nav__link">
      class SetValues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-RingBuffer/" title="class RingBuffer" class="md-nav__link">
      class RingBuffer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-Reverse/" title="class Reverse" class="md-nav__link">
      class Reverse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-Range/" title="class Range" class="md-nav__link">
      class Range
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-Map/" title="type Map" class="md-nav__link">
      type Map
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-MapIs/" title="type MapIs" class="md-nav__link">
      type MapIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-HashMap/" title="class HashMap" class="md-nav__link">
      class HashMap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-MapKeys/" title="class MapKeys" class="md-nav__link">
      class MapKeys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-MapValues/" title="class MapValues" class="md-nav__link">
      class MapValues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-MapPairs/" title="class MapPairs" class="md-nav__link">
      class MapPairs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-ListNode/" title="class ListNode" class="md-nav__link">
      class ListNode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-List/" title="class List" class="md-nav__link">
      class List
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-ListNodes/" title="class ListNodes" class="md-nav__link">
      class ListNodes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-ListValues/" title="class ListValues" class="md-nav__link">
      class ListValues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-Hashable/" title="interface Hashable" class="md-nav__link">
      interface Hashable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-Hashable64/" title="interface Hashable64" class="md-nav__link">
      interface Hashable64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-HashFunction/" title="interface HashFunction" class="md-nav__link">
      interface HashFunction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-HashFunction64/" title="interface HashFunction64" class="md-nav__link">
      interface HashFunction64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-HashEq/" title="primitive HashEq" class="md-nav__link">
      primitive HashEq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-HashEq64/" title="primitive HashEq64" class="md-nav__link">
      primitive HashEq64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-HashIs/" title="primitive HashIs" class="md-nav__link">
      primitive HashIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-HashByteSeq/" title="primitive HashByteSeq" class="md-nav__link">
      primitive HashByteSeq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-Flag/" title="interface Flag" class="md-nav__link">
      interface Flag
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="collections-Flags/" title="class Flags" class="md-nav__link">
      class Flags
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      package debug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        package debug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="debug--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="debug-DebugOut/" title="primitive DebugOut" class="md-nav__link">
      primitive DebugOut
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="debug-DebugErr/" title="primitive DebugErr" class="md-nav__link">
      primitive DebugErr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="debug-DebugStream/" title="type DebugStream" class="md-nav__link">
      type DebugStream
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="debug-Debug/" title="primitive Debug" class="md-nav__link">
      primitive Debug
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      package itertools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        package itertools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="itertools--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="itertools-Iter/" title="class Iter" class="md-nav__link">
      class Iter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      package ponytest
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        package ponytest
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="ponytest--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponytest-UnitTest/" title="trait UnitTest" class="md-nav__link">
      trait UnitTest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponytest-TestList/" title="trait TestList" class="md-nav__link">
      trait TestList
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponytest-ITest/" title="interface ITest" class="md-nav__link">
      interface ITest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponytest-TestHelper/" title="class TestHelper" class="md-nav__link">
      class TestHelper
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="ponytest-PonyTest/" title="actor PonyTest" class="md-nav__link">
      actor PonyTest
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      package random
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        package random
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="random--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="random-XorShift128Plus/" title="class XorShift128Plus" class="md-nav__link">
      class XorShift128Plus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="random-XorOshiro128Plus/" title="class XorOshiro128Plus" class="md-nav__link">
      class XorOshiro128Plus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="random-Rand/" title="type Rand" class="md-nav__link">
      type Rand
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="random-Random/" title="trait Random" class="md-nav__link">
      trait Random
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="random-MT/" title="class MT" class="md-nav__link">
      class MT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="random-Dice/" title="class Dice" class="md-nav__link">
      class Dice
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      package time
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        package time
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="time--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="time-Timers/" title="actor Timers" class="md-nav__link">
      actor Timers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="time-TimerNotify/" title="interface TimerNotify" class="md-nav__link">
      interface TimerNotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="time-Timer/" title="class Timer" class="md-nav__link">
      class Timer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="time-Time/" title="primitive Time" class="md-nav__link">
      primitive Time
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="time-PosixDate/" title="class PosixDate" class="md-nav__link">
      class PosixDate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="time-Nanos/" title="primitive Nanos" class="md-nav__link">
      primitive Nanos
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      source
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        source
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponycheck/randomness/" title="randomness.pony" class="md-nav__link">
      randomness.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponycheck/property_runner/" title="property_runner.pony" class="md-nav__link">
      property_runner.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponycheck/property_helper/" title="property_helper.pony" class="md-nav__link">
      property_helper.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponycheck/property/" title="property.pony" class="md-nav__link">
      property.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponycheck/poperator/" title="poperator.pony" class="md-nav__link">
      poperator.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponycheck/ponycheck/" title="ponycheck.pony" class="md-nav__link">
      ponycheck.pony
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
    <a href="src/ponycheck/generator/" title="generator.pony" class="md-nav__link md-nav__link--active">
      generator.pony
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponycheck/for_all/" title="for_all.pony" class="md-nav__link">
      for_all.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponycheck/ascii_range/" title="ascii_range.pony" class="md-nav__link">
      ascii_range.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/assert/assert/" title="assert.pony" class="md-nav__link">
      assert.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/unsigned/" title="unsigned.pony" class="md-nav__link">
      unsigned.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/stringable/" title="stringable.pony" class="md-nav__link">
      stringable.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/string/" title="string.pony" class="md-nav__link">
      string.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/stdin/" title="stdin.pony" class="md-nav__link">
      stdin.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/std_stream/" title="std_stream.pony" class="md-nav__link">
      std_stream.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/source_loc/" title="source_loc.pony" class="md-nav__link">
      source_loc.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/signed/" title="signed.pony" class="md-nav__link">
      signed.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/seq/" title="seq.pony" class="md-nav__link">
      seq.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/real/" title="real.pony" class="md-nav__link">
      real.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/read_seq/" title="read_seq.pony" class="md-nav__link">
      read_seq.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/pointer/" title="pointer.pony" class="md-nav__link">
      pointer.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/platform/" title="platform.pony" class="md-nav__link">
      platform.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/none/" title="none.pony" class="md-nav__link">
      none.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/maybe_pointer/" title="maybe_pointer.pony" class="md-nav__link">
      maybe_pointer.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/iterator/" title="iterator.pony" class="md-nav__link">
      iterator.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/float/" title="float.pony" class="md-nav__link">
      float.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/env/" title="env.pony" class="md-nav__link">
      env.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/do_not_optimise/" title="do_not_optimise.pony" class="md-nav__link">
      do_not_optimise.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/compare/" title="compare.pony" class="md-nav__link">
      compare.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/bool/" title="bool.pony" class="md-nav__link">
      bool.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/asio_event/" title="asio_event.pony" class="md-nav__link">
      asio_event.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/array/" title="array.pony" class="md-nav__link">
      array.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/any/" title="any.pony" class="md-nav__link">
      any.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/builtin/ambient_auth/" title="ambient_auth.pony" class="md-nav__link">
      ambient_auth.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/sort/" title="sort.pony" class="md-nav__link">
      sort.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/set/" title="set.pony" class="md-nav__link">
      set.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/ring_buffer/" title="ring_buffer.pony" class="md-nav__link">
      ring_buffer.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/reverse/" title="reverse.pony" class="md-nav__link">
      reverse.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/range/" title="range.pony" class="md-nav__link">
      range.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/map/" title="map.pony" class="md-nav__link">
      map.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/list_node/" title="list_node.pony" class="md-nav__link">
      list_node.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/list/" title="list.pony" class="md-nav__link">
      list.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/hashable/" title="hashable.pony" class="md-nav__link">
      hashable.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/collections/flag/" title="flag.pony" class="md-nav__link">
      flag.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/debug/debug/" title="debug.pony" class="md-nav__link">
      debug.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/itertools/iter/" title="iter.pony" class="md-nav__link">
      iter.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponytest/unit_test/" title="unit_test.pony" class="md-nav__link">
      unit_test.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponytest/test_list/" title="test_list.pony" class="md-nav__link">
      test_list.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponytest/test_helper/" title="test_helper.pony" class="md-nav__link">
      test_helper.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/ponytest/pony_test/" title="pony_test.pony" class="md-nav__link">
      pony_test.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/random/xorshift/" title="xorshift.pony" class="md-nav__link">
      xorshift.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/random/xoroshiro/" title="xoroshiro.pony" class="md-nav__link">
      xoroshiro.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/random/random/" title="random.pony" class="md-nav__link">
      random.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/random/mt/" title="mt.pony" class="md-nav__link">
      mt.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/random/dice/" title="dice.pony" class="md-nav__link">
      dice.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/time/timers/" title="timers.pony" class="md-nav__link">
      timers.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/time/timer_notify/" title="timer_notify.pony" class="md-nav__link">
      timer_notify.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/time/timer/" title="timer.pony" class="md-nav__link">
      timer.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/time/time/" title="time.pony" class="md-nav__link">
      time.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/time/posix_date/" title="posix_date.pony" class="md-nav__link">
      posix_date.pony
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="src/time/nanos/" title="nanos.pony" class="md-nav__link">
      nanos.pony
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>generator.pony</h1>
                
                <pre><code class="pony-full-source">use &quot;collections&quot;
use &quot;assert&quot;
use &quot;itertools&quot;
use &quot;debug&quot;

type ValueAndShrink[T1] is (T1^, Iterator[T1^])
  &quot;&quot;&quot;
  Possible return type for `Generator.generate`.
  Represents a generated value and an Iterator of shrunken values.
  &quot;&quot;&quot;

type GenerateResult[T2] is (T2^ | ValueAndShrink[T2])
  &quot;&quot;&quot;
  Return type for `Generator.generate`.

  Either a single value only or a Tuple of a value and an Iterator
  of shrunken values based upon this value.
  &quot;&quot;&quot;

class CountdownIter[T: (Int &amp; Integer[T] val) = USize] is Iterator[T]
  &quot;&quot;&quot;
  workaround until 0.21.0 is released and Range supports negative steps

  `from` is exclusive, `to` is inclusive
  &quot;&quot;&quot;
  var _cur: T
  let _to: T

  new create(from: T, to: T = T.min_value()) =&gt;
    _cur = from
    _to = to

  fun ref has_next(): Bool =&gt;
    _cur &gt; _to

  fun ref next(): T =&gt;
    let res = _cur - 1
    _cur = res
    res

trait box GenObj[T]
  fun generate(rnd: Randomness): GenerateResult[T] ?

  fun shrink(t: T): ValueAndShrink[T] =&gt;
    (consume t, Poperator[T].empty())

  fun generate_value(rnd: Randomness): T^ ? =&gt;
    &quot;&quot;&quot;
    simply generate a value and ignore any possible
    shrink values
    &quot;&quot;&quot;
    let g = this
    match g.generate(rnd)?
    | let t: T =&gt; consume t
    | (let t: T, _) =&gt; consume t
    end

  fun generate_and_shrink(rnd: Randomness): ValueAndShrink[T] ? =&gt;
    &quot;&quot;&quot;
    generate a value and also return a shrink result
    even if the generator does not return any when calling `generate`.
    &quot;&quot;&quot;
    let g = this
    match g.generate(rnd)?
    | let t: T =&gt; g.shrink(consume t)
    | (let t: T, let shrinks: Iterator[T^])=&gt; (consume t, shrinks)
    end

  fun iter(rnd: Randomness): Iterator[GenerateResult[T]]^ =&gt;
    let that: GenObj[T] = this

    object is Iterator[GenerateResult[T]]
      fun ref has_next(): Bool =&gt; true
      fun ref next(): GenerateResult[T] ? =&gt; that.generate(rnd)?
    end

  fun value_iter(rnd: Randomness): Iterator[T^] =&gt;
    let that: GenObj[T] = this

    object is Iterator[T^]
      fun ref has_next(): Bool =&gt; true
      fun ref next(): T^ ? =&gt;
        match that.generate(rnd)?
        | let value_only: T =&gt; consume value_only
        | (let v: T, _) =&gt; consume v
        end
    end

  fun value_and_shrink_iter(rnd: Randomness): Iterator[ValueAndShrink[T]] =&gt;
    let that: GenObj[T] = this

    object is Iterator[ValueAndShrink[T]]
      fun ref has_next(): Bool =&gt; true
      fun ref next(): ValueAndShrink[T] ? =&gt;
        match that.generate(rnd)?
        | let value_only: T =&gt; that.shrink(consume value_only)
        | (let v: T, let shrinks: Iterator[T^]) =&gt; (consume v, consume shrinks)
        end
    end


class box Generator[T] is GenObj[T]
  &quot;&quot;&quot;
  A Generator is capable of generating random values of a certain type `T`
  given a source of `Randomness`
  and knows how to shrink or simplify values of that type.

  When testing a property against one or more given Generators
  those generators' `generate` methods are being called many times
  to generate sample values that are then used to validate the property.

  When a failing sample is found, the ponycheck engine is trying to find a
  smaller or more simple sample by `shrinking` it.
  If the generator did not provide any shrinked samples
  as a result of `generate`, its `shrink` method is called
  to obtain simpler results. Ponycheck obtains more shrunken samples until
  the property is not failing anymore.
  The last failing sample, which is considered the most simple one,
  is then reported to the user.
  &quot;&quot;&quot;
  let _gen: GenObj[T]

  new create(gen: GenObj[T]) =&gt;
    _gen = gen

  fun generate(rnd: Randomness): GenerateResult[T] ? =&gt;
    &quot;&quot;&quot;
    Let this generator generate a value
    given a source of `Randomness`.

    Also allow for returning a value and pre-generated shrink results
    as a `ValueAndShrink[T]` instance, a tuple of `(T^, Seq[T])`.
    This helps propagating shrink results through all kinds of Generator
    combinators like `filter`, `map` and `flatMap`.

    If implementing a custom `Generator` based on another one,
    a Generator Combinator, you should use shrunken values
    returned by `generate` to also return shrunken values based on them

    If generating an example value is costly, it might be more efficient
    to simply return the generated value and only shrink in big steps or do no
    shrinking at all.
    If generating values is lightweight, shrunken values should also be returned.
    &quot;&quot;&quot;
    _gen.generate(rnd)?

  fun shrink(t: T): ValueAndShrink[T] =&gt;
    &quot;&quot;&quot;
    Simplify the given value.

    As the returned value can also be `iso`, it needs to be consumed and returned

    It is preffered to already return a `ValueAndShrink` from `generate`.
    &quot;&quot;&quot;
    _gen.shrink(consume t)

  fun generate_value(rnd: Randomness): T^ ? =&gt;
    _gen.generate_value(rnd)?

  fun generate_and_shrink(rnd: Randomness): ValueAndShrink[T] ? =&gt;
    _gen.generate_and_shrink(rnd)?

  fun filter(predicate: {(T): (T^, Bool)} box): Generator[T] =&gt;
    &quot;&quot;&quot;
    apply `predicate` to the values generated by this Generator
    and only values for which `predicate` returns `true`.

    Example:

    ```pony
    let even_i32s =
      Generators.i32()
        .filter(
          {(t) =&gt; (t, ((t % 2) == 0)) })
    ```
    &quot;&quot;&quot;
    Generator[T](
      object is GenObj[T]
        fun generate(rnd: Randomness): GenerateResult[T] ? =&gt;
          (let t: T, let shrunken: Iterator[T^]) = _gen.generate_and_shrink(rnd)?
          (let t1, let matches) = predicate(consume t)
          if not matches then
            generate(rnd)? // recurse, this might recurse infinitely
          else
            // filter the shrunken examples
            (consume t1, _filter_shrunken(shrunken))
          end

        fun shrink(t: T): ValueAndShrink[T] =&gt;
          &quot;&quot;&quot;
          shrink `t` using the generator this one filters upon
          and call the filter predicate on the shrunken values
          &quot;&quot;&quot;
          (let s, let shrunken: Iterator[T^]) = _gen.shrink(consume t)
          (consume s, _filter_shrunken(shrunken))

        fun _filter_shrunken(shrunken: Iterator[T^]): Iterator[T^] =&gt;
          Iter[T^](shrunken)
            .filter_map[T^]({
              (t: T): (T^| None) =&gt;
                match predicate(consume t)
                | (let matching: T^, true) =&gt; consume matching
                end
            })
      end)

  fun map[U](fn: {(T): U^} box)
    : Generator[U]
  =&gt;
    &quot;&quot;&quot;
    apply function `fn` to each value of this iterator
    and yield the results.

    Example:

    ```pony
    let single_code_point_string_gen =
      Generators.u32()
        .map[String]({(u) =&gt; String.from_utf32(u) })
    ```
    &quot;&quot;&quot;
    Generator[U](
      object is GenObj[U]
        fun generate(rnd: Randomness): GenerateResult[U] ? =&gt;
          (let generated: T, let shrunken: Iterator[T^]) =
            _gen.generate_and_shrink(rnd)?

          (fn(consume generated), _map_shrunken(shrunken))

        fun shrink(u: U): ValueAndShrink[U] =&gt;
          &quot;&quot;&quot;
          We can only shrink if T is a subtype of U.

          This method should in general not be called on this generator
          as it is always returning shrinks with the call to `generate`
          and they should be used for executing the shrink, but in case
          a strange hierarchy of generators is used, which does not make use of
          the pre-generated shrink results, we keep this method here.
          &quot;&quot;&quot;
          match u
          | let ut: T =&gt;
            (let uts: T, let shrunken: Iterator[T^]) = _gen.shrink(consume ut)
            (fn(consume uts), _map_shrunken(shrunken))
          else
            (consume u, Poperator[U].empty())
          end

        fun _map_shrunken(shrunken: Iterator[T^]): Iterator[U^] =&gt;
          Iter[T^](shrunken)
            .map[U^]({(t) =&gt; fn(consume t) })

      end)

  fun flat_map[U](fn: {(T): Generator[U]} box): Generator[U] =&gt;
    &quot;&quot;&quot;
    For each value of this generator create a generator that is then combined.
    &quot;&quot;&quot;
    // TODO: enable proper shrinking:
    Generator[U](
      object is GenObj[U]
        fun generate(rnd: Randomness): GenerateResult[U] ? =&gt;
          let value: T = _gen.generate_value(rnd)?
          fn(consume value).generate_and_shrink(rnd)?

      end)

  fun union[U](other: Generator[U]): Generator[(T | U)] =&gt;
    &quot;&quot;&quot;
    Create a generator that produces the value of this generator or the other
    with the same probability, returning a union type of this generator and the other one.
    &quot;&quot;&quot;
    Generator[(T | U)](
      object is GenObj[(T | U)]
        fun generate(rnd: Randomness): GenerateResult[(T | U)] ? =&gt;
          if rnd.bool() then
            _gen.generate_and_shrink(rnd)?
          else
            other.generate_and_shrink(rnd)?
          end

        fun shrink(t: (T | U)): ValueAndShrink[(T | U )] =&gt;
          match t
          | let tt: T =&gt; _gen.shrink(consume tt)
          | let tu: U =&gt; other.shrink(consume tu)
          end
      end
    )

type WeightedGenerator[T] is (USize, Generator[T] box)
  &quot;&quot;&quot;
  A generator with an associated weight, used in Generators.frequency.
  &quot;&quot;&quot;

primitive Generators
  &quot;&quot;&quot;
  Convenience combinators and factories for common types and kind of Generators.
  &quot;&quot;&quot;

  fun unit[T](t: T, do_shrink: Bool = false): Generator[box-&gt;T] =&gt;
    &quot;&quot;&quot;
    Generate a reference to the same value over and over again.

    This reference will be of type ``box-&gt;T`` and not just ``T``
    as this generator will need to keep a reference to the given value.
    &quot;&quot;&quot;
    Generator[box-&gt;T](
      object is GenObj[box-&gt;T]
        let _t: T = consume t
        fun generate(rnd: Randomness): GenerateResult[box-&gt;T] =&gt;
          if do_shrink then
            (_t, Iter[box-&gt;T].repeat_value(_t))
          else
            _t
          end
      end)

  fun none[T: None](): Generator[(T | None)] =&gt; Generators.unit[(T | None)](None)

  fun repeatedly[T](f: {(): T^ ?} box): Generator[T] =&gt;
    &quot;&quot;&quot;
    Generate values by calling the lambda ``f`` repeatedly,
    once for every invocation of ``generate``.

    ``f`` needs to return an ephemeral type ``T^``, that means
    in most cases it needs to consume its returned value.
    Otherwise we would end up with
    an alias for ``T`` which is ``T!``.
    (e.g. ``String iso`` would be returned as ``String iso!``
    which is a ``String tag``).

    Example:

    ```pony
    Generators.repeatedly[Writer]({(): Writer^ =&gt;
      let writer = Writer.&gt;write(&quot;consume me, please&quot;)
      consume writer
    })
    ```
    &quot;&quot;&quot;
    Generator[T](
      object is GenObj[T]
        fun generate(rnd: Randomness): GenerateResult[T] ? =&gt;
          f()?
      end)


  fun seq_of[T, S: Seq[T] ref](
    gen: Generator[T],
    min: USize = 0,
    max: USize = 100)
    : Generator[S]
  =&gt;
    &quot;&quot;&quot;
    Create a `Seq` from the values of the given Generator with an optional minimum and
    maximum size, defaults are 0 and 100 respectively.
    &quot;&quot;&quot;

    Generator[S](
      object is GenObj[S]
        let _gen: GenObj[T] = gen
        fun generate(rnd: Randomness): GenerateResult[S] =&gt;
          let size = rnd.usize(min, max)
          let initial: (S, Array[S]) = (S.create(size), Array[S](size))

          let result: S =
            Iter[T^](_gen.value_iter(rnd))
              .take(size)
              .collect[S](S.create(size))

          // create shrink_iter with smaller seqs and elements generated from _gen.value_iter
          let shrink_iter =
            Iter[USize](CountdownIter(size, min)) //Range(size, min, -1))
              // .skip(1)
              .map_stateful[S^]({
                (s: USize): S^ =&gt;
                  Iter[T^](_gen.value_iter(rnd))
                    .take(s)
                    .collect[S](S.create(s))
              })
          (consume result, shrink_iter)
      end)

  fun array_of[T](
    gen: Generator[T],
    min: USize = 0,
    max: USize = 100)
    : Generator[Array[T]]
  =&gt;
    Generators.seq_of[T, Array[T]](gen, min, max)

  fun list_of[T](
    gen: Generator[T],
    min: USize = 0,
    max: USize = 100)
    : Generator[List[T]]
  =&gt;
    Generators.seq_of[T, List[T]](gen, min, max)

  fun set_of[T: (Hashable #read &amp; Equatable[T] #read)](
    gen: Generator[T],
    max: USize = 100)
    : Generator[Set[T]]
  =&gt;
    &quot;&quot;&quot;
    Create a generator for ``Set`` filled with values
    of the given generator ``gen``.
    The returned sets will have a size up to ``max``
    but tend to have fewer than ``max``
    depending on the source generator ``gen``.

    E.g. if the given generator is for ``U8`` values and ``max`` is set to 1024
    the set will only ever be of size 256 max.

    Also for efficiency purposes and to not loop forever
    this generator will only try to add at most ``max`` values to the set.
    If there are duplicates, the set won't grow.
    &quot;&quot;&quot;
    Generator[Set[T]](
      object is GenObj[Set[T]]
        let _gen: GenObj[T] = gen
        fun generate(rnd: Randomness): GenerateResult[Set[T]] =&gt;
          let size = rnd.usize(0, max)
          let result: Set[T] =
            Set[T].create(size).&gt;union(
              Iter[T^](_gen.value_iter(rnd))
              .take(size)
            )
          let shrink_iter: Iterator[Set[T]^] =
            Iter[USize](CountdownIter(size, 0)) // Range(size, 0, -1))
              //.skip(1)
              .map_stateful[Set[T]^]({
                (s: USize): Set[T]^ =&gt;
                  Set[T].create(s).&gt;union(
                    Iter[T^](_gen.value_iter(rnd)).take(s)
                  )
                })
          (consume result, shrink_iter)
      end)

  fun set_is_of[T](
    gen: Generator[T],
    max: USize = 100)
    : Generator[SetIs[T]]
  =&gt;
    &quot;&quot;&quot;
    Create a generator for ``SetIs`` filled with values
    of the given generator ``gen``.
    The returned ``SetIs`` will have a size up to ``max``
    but tend to have fewer entries
    depending on the source generator ``gen``.

    E.g. if the given generator is for ``U8`` values and ``max`` is set to 1024
    the set will only ever be of size 256 max.

    Also for efficiency purposes and to not loop forever
    this generator will only try to add at most ``max`` values to the set.
    If there are duplicates, the set won't grow.
    &quot;&quot;&quot;
    // TODO: how to remove code duplications
    Generator[SetIs[T]](
      object is GenObj[SetIs[T]]
        fun generate(rnd: Randomness): GenerateResult[SetIs[T]] =&gt;
          let size = rnd.usize(0, max)

          let result: SetIs[T] =
            SetIs[T].create(size).&gt;union(
              Iter[T^](gen.value_iter(rnd))
                .take(size)
            )
          let shrink_iter: Iterator[SetIs[T]^] =
            Iter[USize](CountdownIter(size, 0)) //Range(size, 0, -1))
              //.skip(1)
              .map_stateful[SetIs[T]^]({
                (s: USize): SetIs[T]^ =&gt;
                  SetIs[T].create(s).&gt;union(
                    Iter[T^](gen.value_iter(rnd)).take(s)
                  )
                })
          (consume result, shrink_iter)
      end)

  fun map_of[K: (Hashable #read &amp; Equatable[K] #read), V](
    gen: Generator[(K, V)],
    max: USize = 100)
    : Generator[Map[K, V]]
  =&gt;
    &quot;&quot;&quot;
    Create a generator for ``Map`` from a generator of key-value tuples.
    The generated maps will have a size up to ``max``
    but tend to have fewer entries depending on the source generator ``gen``.

    If the generator generates key-value pairs with
    duplicate keys (based on structural equality)
    the pair that is generated later will overwrite earlier entries in the map.
    &quot;&quot;&quot;
    Generator[Map[K, V]](
      object is GenObj[Map[K, V]]
        fun generate(rnd: Randomness): GenerateResult[Map[K, V]] =&gt;
          let size = rnd.usize(0, max)

          let result: Map[K, V] =
            Map[K, V].create(size).&gt;concat(
              Iter[(K^, V^)](gen.value_iter(rnd))
                .take(size)
            )
          let shrink_iter: Iterator[Map[K, V]^] =
            Iter[USize](CountdownIter(size, 0)) // Range(size, 0, -1))
              // .skip(1)
              .map_stateful[Map[K, V]^]({
                (s: USize): Map[K, V]^ =&gt;
                  Map[K, V].create(s).&gt;concat(
                    Iter[(K^, V^)](gen.value_iter(rnd)).take(s)
                  )
                })
          (consume result, shrink_iter)

      end)

  fun map_is_of[K, V](
    gen: Generator[(K, V)],
    max: USize = 100)
    : Generator[MapIs[K, V]]
  =&gt;
    &quot;&quot;&quot;
    Create a generator for ``MapIs`` from a generator of key-value tuples.
    The generated maps will have a size up to ``max``
    but tend to have fewer entries depending on the source generator ``gen``.

    If the generator generates key-value pairs with
    duplicate keys (based on identity)
    the pair that is generated later will overwrite earlier entries in the map.
    &quot;&quot;&quot;
    Generator[MapIs[K, V]](
      object is GenObj[MapIs[K, V]]
        fun generate(rnd: Randomness): GenerateResult[MapIs[K, V]] =&gt;
          let size = rnd.usize(0, max)

          let result: MapIs[K, V] =
            MapIs[K, V].create(size).&gt;concat(
              Iter[(K^, V^)](gen.value_iter(rnd))
                .take(size)
            )
          let shrink_iter: Iterator[MapIs[K, V]^] =
            Iter[USize](CountdownIter(size, 0)) //Range(size, 0, -1))
              // .skip(1)
              .map_stateful[MapIs[K, V]^]({
                (s: USize): MapIs[K, V]^ =&gt;
                  MapIs[K, V].create(s).&gt;concat(
                    Iter[(K^, V^)](gen.value_iter(rnd)).take(s)
                  )
                })
          (consume result, shrink_iter)
      end)


  fun one_of[T](xs: ReadSeq[T], do_shrink: Bool = false): Generator[box-&gt;T] =&gt;
    &quot;&quot;&quot;
    Generate a random value from the given ReadSeq.
    This generator will generate nothing if the given xs is empty.

    Generators created with this method do not support shrinking.
    If `do_shrink` is set to `true`, it will return the same value
    for each shrink round. Otherwise it will return nothing.
    &quot;&quot;&quot;

    Generator[box-&gt;T](
      object is GenObj[box-&gt;T]
        fun generate(rnd: Randomness): GenerateResult[box-&gt;T] ? =&gt;
          let idx = rnd.usize(0, xs.size() - 1)
          let res = xs(idx)?
          if do_shrink then
            (res, Iter[box-&gt;T].repeat_value(res))
          else
            res
          end
      end)

  fun one_of_safe[T](xs: ReadSeq[T], do_shrink: Bool = false): Generator[box-&gt;T] ? =&gt;
    &quot;&quot;&quot;
    Version of `one_of` that will error if `xs` is empty.
    &quot;&quot;&quot;
    Fact(xs.size() &gt; 0, &quot;cannot use one_of_safe on empty ReadSeq&quot;)?
    Generators.one_of[T](xs, do_shrink)

  fun frequency[T](
    weighted_generators: ReadSeq[WeightedGenerator[T]])
    : Generator[T]
  =&gt;
    &quot;&quot;&quot;
    chose a value of one of the given Generators,
    while controlling the distribution with the associated weights.

    The weights are of type ``USize`` and control how likely a value is chosen.
    The likelihood of a value ``v`` to be chosen
    is ``weight_v`` / ``weights_sum``.
    If all ``weighted_generators`` have equal size the distribution
    will be uniform.

    Example of a generator to output odd ``U8`` values
    twice as likely as even ones:

    ```pony
    Generators.frequency[U8]([
      (1, Generators.u8().filter({(u) =&gt; (u, (u % 2) == 0 }))
      (2, Generators.u8().filter({(u) =&gt; (u, (u % 2) != 0 }))
    ])
    ```
    &quot;&quot;&quot;

    // nasty hack to avoid handling the theoretical error case where we have
    // no generator and thus would have to change the type signature
    Generator[T](
      object is GenObj[T]
        fun generate(rnd: Randomness): GenerateResult[T] ? =&gt;
          let weight_sum: USize =
            Iter[WeightedGenerator[T]](weighted_generators.values())
              .fold[USize](
                0,
                // segfaults when types are removed - TODO: investigate
                {(acc: USize, weighted_gen: WeightedGenerator[T]): USize^ =&gt;
                  weighted_gen._1 + acc
                })
          let desired_sum = rnd.usize(0, weight_sum)
          var running_sum: USize = 0
          var chosen: (Generator[T] | None) = None
          for weighted_gen in weighted_generators.values() do
            let new_sum = running_sum + weighted_gen._1
            if ((desired_sum == 0) or ((running_sum &lt; desired_sum) and (desired_sum &lt;= new_sum))) then
              // we just crossed or reached the desired sum
              chosen = weighted_gen._2
              break
            else
              // update running sum
              running_sum = new_sum
            end
          end
          match chosen
          | let x: Generator[T] box =&gt; x.generate(rnd)?
          | None =&gt;
            Debug(&quot;chosen is None, desired_sum: &quot; + desired_sum.string() +
              &quot;running_sum: &quot; + running_sum.string())
            error
          end
      end)

  fun frequency_safe[T](
    weighted_generators: ReadSeq[WeightedGenerator[T]])
    : Generator[T] ?
  =&gt;
    &quot;&quot;&quot;
    Version of `frequency` that errors if the given `weighted_generators` is
    empty.
    &quot;&quot;&quot;
    Fact(weighted_generators.size() &gt; 0,
     &quot;cannot use frequency_safe on empty ReadSeq[WeightedGenerator]&quot;)?
    Generators.frequency[T](weighted_generators)

  fun zip2[T1, T2](
    gen1: Generator[T1],
    gen2: Generator[T2])
    : Generator[(T1, T2)]
  =&gt;
    &quot;&quot;&quot;
    zip two generators into a generator of a 2-tuple
    containing the values generated by both generators.
    &quot;&quot;&quot;
    Generator[(T1, T2)](
      object is GenObj[(T1, T2)]
        fun generate(rnd: Randomness): GenerateResult[(T1, T2)] ? =&gt;
          (let v1: T1, let shrinks1: Iterator[T1^]) =
            gen1.generate_and_shrink(rnd)?
          (let v2: T2, let shrinks2: Iterator[T2^]) =
            gen2.generate_and_shrink(rnd)?
          ((consume v1, consume v2), Iter[T1^](shrinks1).zip[T2^](shrinks2))

        fun shrink(t: (T1, T2)): ValueAndShrink[(T1, T2)] =&gt;
          (let t1, let t2) = consume t
          (let t11, let t1_shrunken: Iterator[T1^]) = gen1.shrink(consume t1)
          (let t21, let t2_shrunken: Iterator[T2^]) = gen2.shrink(consume t2)

          let shrunken = Iter[T1^](t1_shrunken).zip[T2^](t2_shrunken)
          ((consume t11, consume t21), shrunken)
      end)

  fun zip3[T1, T2, T3](
    gen1: Generator[T1],
    gen2: Generator[T2],
    gen3: Generator[T3])
    : Generator[(T1, T2, T3)]
  =&gt;
    &quot;&quot;&quot;
    zip three generators into a generator of a 3-tuple
    containing the values generated by those three generators.
    &quot;&quot;&quot;
    Generator[(T1, T2, T3)](
      object is GenObj[(T1, T2, T3)]
        fun generate(rnd: Randomness): GenerateResult[(T1, T2, T3)] ? =&gt;
          (let v1: T1, let shrinks1: Iterator[T1^]) =
            gen1.generate_and_shrink(rnd)?
          (let v2: T2, let shrinks2: Iterator[T2^]) =
            gen2.generate_and_shrink(rnd)?
          (let v3: T3, let shrinks3: Iterator[T3^]) =
            gen3.generate_and_shrink(rnd)?
          ((consume v1, consume v2, consume v3),
              Iter[T1^](shrinks1).zip2[T2^, T3^](shrinks2, shrinks3))

        fun shrink(t: (T1, T2, T3)): ValueAndShrink[(T1, T2, T3)] =&gt;
          (let t1, let t2, let t3) = consume t
          (let t11, let t1_shrunken: Iterator[T1^]) = gen1.shrink(consume t1)
          (let t21, let t2_shrunken: Iterator[T2^]) = gen2.shrink(consume t2)
          (let t31, let t3_shrunken: Iterator[T3^]) = gen3.shrink(consume t3)

          let shrunken = Iter[T1^](t1_shrunken).zip2[T2^, T3^](t2_shrunken, t3_shrunken)
          ((consume t11, consume t21, consume t31), shrunken)
        end)

  fun zip4[T1, T2, T3, T4](
    gen1: Generator[T1],
    gen2: Generator[T2],
    gen3: Generator[T3],
    gen4: Generator[T4])
    : Generator[(T1, T2, T3, T4)]
  =&gt;
    &quot;&quot;&quot;
    zip four generators into a generator of a 4-tuple
    containing the values generated by those four generators.
    &quot;&quot;&quot;
    Generator[(T1, T2, T3, T4)](
      object is GenObj[(T1, T2, T3, T4)]
        fun generate(rnd: Randomness): GenerateResult[(T1, T2, T3, T4)] ? =&gt;
          (let v1: T1, let shrinks1: Iterator[T1^]) =
            gen1.generate_and_shrink(rnd)?
          (let v2: T2, let shrinks2: Iterator[T2^]) =
            gen2.generate_and_shrink(rnd)?
          (let v3: T3, let shrinks3: Iterator[T3^]) =
            gen3.generate_and_shrink(rnd)?
          (let v4: T4, let shrinks4: Iterator[T4^]) =
            gen4.generate_and_shrink(rnd)?
          ((consume v1, consume v2, consume v3, consume v4),
              Iter[T1^](shrinks1).zip3[T2^, T3^, T4^](shrinks2, shrinks3, shrinks4))

        fun shrink(t: (T1, T2, T3, T4)): ValueAndShrink[(T1, T2, T3, T4)] =&gt;
          (let t1, let t2, let t3, let t4) = consume t
          (let t11, let t1_shrunken) = gen1.shrink(consume t1)
          (let t21, let t2_shrunken) = gen2.shrink(consume t2)
          (let t31, let t3_shrunken) = gen3.shrink(consume t3)
          (let t41, let t4_shrunken) = gen4.shrink(consume t4)

          let shrunken = Iter[T1^](t1_shrunken)
            .zip3[T2^, T3^, T4^](t2_shrunken, t3_shrunken, t4_shrunken)
          ((consume t11, consume t21, consume t31, consume t41), shrunken)
        end)

  fun map2[T1, T2, T3](
    gen1: Generator[T1],
    gen2: Generator[T2],
    fn: {(T1, T2): T3^})
    : Generator[T3]
  =&gt;
    &quot;&quot;&quot;
    convenience combinator for mapping 2 generators into 1
    &quot;&quot;&quot;
    Generators.zip2[T1, T2](gen1, gen2)
      .map[T3]({(arg) =&gt;
        (let arg1, let arg2) = consume arg
        fn(consume arg1, consume arg2)
      })

  fun map3[T1, T2, T3, T4](
    gen1: Generator[T1],
    gen2: Generator[T2],
    gen3: Generator[T3],
    fn: {(T1, T2, T3): T4^})
    : Generator[T4]
  =&gt;
    &quot;&quot;&quot;
    convenience combinator for mapping 3 generators into 1
    &quot;&quot;&quot;
    Generators.zip3[T1, T2, T3](gen1, gen2, gen3)
      .map[T4]({(arg) =&gt;
        (let arg1, let arg2, let arg3) = consume arg
        fn(consume arg1, consume arg2, consume arg3)
      })

  fun map4[T1, T2, T3, T4, T5](
    gen1: Generator[T1],
    gen2: Generator[T2],
    gen3: Generator[T3],
    gen4: Generator[T4],
    fn: {(T1, T2, T3, T4): T5^})
    : Generator[T5]
  =&gt;
    &quot;&quot;&quot;
    convenience combinator for mapping 4 generators into 1
    &quot;&quot;&quot;
    Generators.zip4[T1, T2, T3, T4](gen1, gen2, gen3, gen4)
      .map[T5]({(arg) =&gt;
        (let arg1, let arg2, let arg3, let arg4) = consume arg
        fn(consume arg1, consume arg2, consume arg3, consume arg4)
      })

  fun bool(): Generator[Bool] =&gt;
    &quot;&quot;&quot;
    create a generator of bool values.
    &quot;&quot;&quot;
    Generator[Bool](
      object is GenObj[Bool]
        fun generate(rnd: Randomness): Bool =&gt;
          rnd.bool()
        end)

  fun _int_shrink[T: (Int &amp; Integer[T] val)](t: T^, min: T): ValueAndShrink[T] =&gt;
    &quot;&quot;&quot;
    &quot;&quot;&quot;
    let relation = t.compare(min)
    let t_copy: T = T.create(t)
    //Debug(t.string() + &quot; is &quot; + relation.string() + &quot; than min &quot; + min.string())
    let sub_iter =
      object is Iterator[T^]
        var _cur: T = t_copy
        var _subtract: F64 = 1.0
        var _overflow: Bool = false

        fun ref _next_minuend(): T =&gt;
          // f(x) = x + (2^-5 * x^2)
          T.from[F64](_subtract = _subtract + (0.03125 * _subtract * _subtract))

        fun ref has_next(): Bool =&gt;
          match relation
          | Less =&gt; (_cur &lt; min) and not _overflow
          | Equal =&gt; false
          | Greater =&gt; (_cur &gt; min) and not _overflow
          end

        fun ref next(): T^ ? =&gt;
          match relation
          | Less =&gt;
            let minuend: T = _next_minuend()
            let old = _cur
            _cur = _cur + minuend
            if old &gt; _cur then
              _overflow = true
            end
            old
          | Equal =&gt; error
          | Greater =&gt;
            let minuend: T = _next_minuend()
            let old = _cur
            _cur = _cur - minuend
            if old &lt; _cur then
              _overflow = true
            end
            old
          end
      end

    let min_iter =
      match relation
      | let _: (Less | Greater) =&gt; Poperator[T]([min])
      | Equal =&gt; Poperator[T].empty()
      end

    let shrunken_iter = Iter[T].chain(
      [
        Iter[T^](sub_iter).skip(1)
        min_iter
      ].values())
    (consume t, shrunken_iter)

  fun u8(
    min: U8 = U8.min_value(),
    max: U8 = U8.max_value())
    : Generator[U8]
  =&gt;
    &quot;&quot;&quot;
    create a generator for U8 values
    &quot;&quot;&quot;
    let that = this
    Generator[U8](
      object is GenObj[U8]
        fun generate(rnd: Randomness): U8^ =&gt;
          rnd.u8(min, max)

        fun shrink(u: U8): ValueAndShrink[U8] =&gt;
          that._int_shrink[U8](consume u, min)
        end)

  fun u16(
    min: U16 = U16.min_value(),
    max: U16 = U16.max_value())
    : Generator[U16]
  =&gt;
    &quot;&quot;&quot;
    create a generator for U16 values
    &quot;&quot;&quot;
    let that = this
    Generator[U16](
      object is GenObj[U16]
        fun generate(rnd: Randomness): U16^ =&gt;
          rnd.u16(min, max)

        fun shrink(u: U16): ValueAndShrink[U16] =&gt;
          that._int_shrink[U16](consume u, min)
      end)

  fun u32(
    min: U32 = U32.min_value(),
    max: U32 = U32.max_value())
    : Generator[U32]
  =&gt;
    &quot;&quot;&quot;
    create a generator for U32 values
    &quot;&quot;&quot;
    let that = this
    Generator[U32](
      object is GenObj[U32]
        fun generate(rnd: Randomness): U32^ =&gt;
          rnd.u32(min, max)

        fun shrink(u: U32): ValueAndShrink[U32] =&gt;
          that._int_shrink[U32](consume u, min)
      end)

  fun u64(
    min: U64 = U64.min_value(),
    max: U64 = U64.max_value())
    : Generator[U64]
  =&gt;
    &quot;&quot;&quot;
    create a generator for U64 values
    &quot;&quot;&quot;
    let that = this
    Generator[U64](
      object is GenObj[U64]
        fun generate(rnd: Randomness): U64^ =&gt;
          rnd.u64(min, max)

        fun shrink(u: U64): ValueAndShrink[U64] =&gt;
          that._int_shrink[U64](consume u, min)
      end)

  fun u128(
    min: U128 = U128.min_value(),
    max: U128 = U128.max_value())
    : Generator[U128]
  =&gt;
    &quot;&quot;&quot;
    create a generator for U128 values
    &quot;&quot;&quot;
    let that = this
    Generator[U128](
      object is GenObj[U128]
        fun generate(rnd: Randomness): U128^ =&gt;
          rnd.u128(min, max)

        fun shrink(u: U128): ValueAndShrink[U128] =&gt;
          that._int_shrink[U128](consume u, min)
      end)

  fun usize(
    min: USize = USize.min_value(),
    max: USize = USize.max_value())
    : Generator[USize]
  =&gt;
    &quot;&quot;&quot;
    create a generator for USize values
    &quot;&quot;&quot;
    let that = this
    Generator[USize](
      object is GenObj[USize]
        fun generate(rnd: Randomness): GenerateResult[USize] =&gt;
          rnd.usize(min, max)

        fun shrink(u: USize): ValueAndShrink[USize] =&gt;
          that._int_shrink[USize](consume u, min)
      end)

  fun ulong(
    min: ULong = ULong.min_value(),
    max: ULong = ULong.max_value())
    : Generator[ULong]
  =&gt;
    &quot;&quot;&quot;
    create a generator for ULong values
    &quot;&quot;&quot;
    let that = this
    Generator[ULong](
      object is GenObj[ULong]
        fun generate(rnd: Randomness): ULong^ =&gt;
          rnd.ulong(min, max)

        fun shrink(u: ULong): ValueAndShrink[ULong] =&gt;
          that._int_shrink[ULong](consume u, min)
      end)

  fun i8(
    min: I8 = I8.min_value(),
    max: I8 = I8.max_value())
    : Generator[I8]
  =&gt;
    &quot;&quot;&quot;
    create a generator for I8 values
    &quot;&quot;&quot;
    let that = this
    Generator[I8](
      object is GenObj[I8]
        fun generate(rnd: Randomness): I8^ =&gt;
          rnd.i8(min, max)

        fun shrink(i: I8): ValueAndShrink[I8] =&gt;
          that._int_shrink[I8](consume i, min)
      end)

  fun i16(
    min: I16 = I16.min_value(),
    max: I16 = I16.max_value())
    : Generator[I16]
  =&gt;
    &quot;&quot;&quot;
    create a generator for I16 values
    &quot;&quot;&quot;
    let that = this
    Generator[I16](
      object is GenObj[I16]
        fun generate(rnd: Randomness): I16^ =&gt;
          rnd.i16(min, max)

        fun shrink(i: I16): ValueAndShrink[I16] =&gt;
          that._int_shrink[I16](consume i, min)
      end)

  fun i32(
    min: I32 = I32.min_value(),
    max: I32 = I32.max_value())
    : Generator[I32]
  =&gt;
    &quot;&quot;&quot;
    create a generator for I32 values
    &quot;&quot;&quot;
    let that = this
    Generator[I32](
      object is GenObj[I32]
        fun generate(rnd: Randomness): I32^ =&gt;
          rnd.i32(min, max)

        fun shrink(i: I32): ValueAndShrink[I32] =&gt;
          that._int_shrink[I32](consume i, min)
      end)

  fun i64(
    min: I64 = I64.min_value(),
    max: I64 = I64.max_value())
    : Generator[I64]
  =&gt;
    &quot;&quot;&quot;
    create a generator for I64 values
    &quot;&quot;&quot;
    let that = this
    Generator[I64](
      object is GenObj[I64]
        fun generate(rnd: Randomness): I64^ =&gt;
          rnd.i64(min, max)

        fun shrink(i: I64): ValueAndShrink[I64] =&gt;
          that._int_shrink[I64](consume i, min)
      end)

  fun i128(
    min: I128 = I128.min_value(),
    max: I128 = I128.max_value())
    : Generator[I128]
  =&gt;
    &quot;&quot;&quot;
    create a generator for I128 values
    &quot;&quot;&quot;
    let that = this
    Generator[I128](
      object is GenObj[I128]
        fun generate(rnd: Randomness): I128^ =&gt;
          rnd.i128(min, max)

        fun shrink(i: I128): ValueAndShrink[I128] =&gt;
          that._int_shrink[I128](consume i, min)
      end)

  fun ilong(
    min: ILong = ILong.min_value(),
    max: ILong = ILong.max_value())
    : Generator[ILong]
    =&gt;
    &quot;&quot;&quot;
    create a generator for ILong values
    &quot;&quot;&quot;
    let that = this
    Generator[ILong](
      object is GenObj[ILong]
        fun generate(rnd: Randomness): ILong^ =&gt;
          rnd.ilong(min, max)

        fun shrink(i: ILong): ValueAndShrink[ILong] =&gt;
          that._int_shrink[ILong](consume i, min)
      end)

  fun isize(
    min: ISize = ISize.min_value(),
    max: ISize = ISize.max_value())
    : Generator[ISize]
  =&gt;
    &quot;&quot;&quot;
    create a generator for ISize values
    &quot;&quot;&quot;
    let that = this
    Generator[ISize](
      object is GenObj[ISize]
        fun generate(rnd: Randomness): ISize^ =&gt;
          rnd.isize(min, max)

        fun shrink(i: ISize): ValueAndShrink[ISize] =&gt;
          that._int_shrink[ISize](consume i, min)
      end)


  fun byte_string(
    gen: Generator[U8],
    min: USize = 0,
    max: USize = 100)
    : Generator[String]
  =&gt;
    &quot;&quot;&quot;
    create a generator for strings
    generated from the bytes returned by the generator ``gen``
    with a minimum length of ``min`` (default: 0)
    and a maximum length of ``max`` (default: 100).
    &quot;&quot;&quot;
    Generator[String](
      object is GenObj[String]
        fun generate(rnd: Randomness): GenerateResult[String] =&gt;
          let size = rnd.usize(min, max)
          let gen_iter = Iter[U8^](gen.value_iter(rnd))
            .take(size)
          let arr: Array[U8] iso = recover Array[U8](size) end
          for b in gen_iter do
            arr.push(b)
          end
          String.from_iso_array(consume arr)

        fun shrink(s: String): ValueAndShrink[String] =&gt;
          &quot;&quot;&quot;
          shrink string until ``min`` length.
          &quot;&quot;&quot;
          var str: String = s.trim(0, s.size()-1)
          let shorten_iter: Iterator[String^] =
            object is Iterator[String^]
              fun ref has_next(): Bool =&gt; str.size() &gt; min
              fun ref next(): String^ =&gt;
                str = str.trim(0, str.size()-1)
            end
          let min_iter =
            if s.size() &gt; min then
              Poperator[String]([s.trim(0, min)])
            else
              Poperator[String].empty()
            end
          let shrink_iter =
            Iter[String^].chain([
              shorten_iter
              min_iter
            ].values())
          (consume s, shrink_iter)
      end)

  fun ascii(
    min: USize = 0,
    max: USize = 100,
    range: ASCIIRange = ASCIIAll)
    : Generator[String]
  =&gt;
    &quot;&quot;&quot;
    create a generator for strings withing the given ``range``
    with a minimum length of ``min`` (default: 0)
    and a maximum length of ``max`` (default: 100).
    &quot;&quot;&quot;
    let range_bytes = range.apply()
    let fallback = U8(0)
    let range_bytes_gen = usize(0, range_bytes.size()-1)
      .map[U8]({(size) =&gt;
        try
          range_bytes(size)?
        else
          // should never happen
          fallback
        end })
    byte_string(range_bytes_gen, min, max)

  fun ascii_printable(
    min: USize = 0,
    max: USize = 100)
    : Generator[String]
  =&gt;
    &quot;&quot;&quot;
    create a generator for strings of printable ascii characters
    with a minimum length of ``min`` (default: 0)
    and a maximum length of ``max`` (default: 100).
    &quot;&quot;&quot;
    ascii(min, max, ASCIIPrintable)

  fun ascii_numeric(
    min: USize = 0,
    max: USize = 100)
    : Generator[String]
  =&gt;
    &quot;&quot;&quot;
    create a generator for strings of numeric ascii characters
    with a minimum length of ``min`` (default: 0)
    and a maximum length of ``max`` (default: 100).
    &quot;&quot;&quot;
    ascii(min, max, ASCIIDigits)

  fun ascii_letters(
    min: USize = 0,
    max: USize = 100)
    : Generator[String]
  =&gt;
    &quot;&quot;&quot;
    create a generator for strings of ascii letters
    with a minimum length of ``min`` (default: 0)
    and a maximum length of ``max`` (default: 100).
    &quot;&quot;&quot;
    ascii(min, max, ASCIILetters)

  fun utf32_codepoint_string(
    gen: Generator[U32],
    min: USize = 0,
    max: USize = 100)
    : Generator[String]
  =&gt;
    &quot;&quot;&quot;
    create a generator for strings
    from a generator of unicode codepoints
    with a minimum length of ``min`` codepoints (default: 0)
    and a maximum length of ``max`` codepoints (default: 100).

    Note that the byte length of the generated string can be up to 4 times
    the size in code points.
    &quot;&quot;&quot;
    Generator[String](
      object is GenObj[String]
        fun generate(rnd: Randomness): GenerateResult[String] =&gt;
          let size = rnd.usize(min, max)
          let gen_iter = Iter[U32^](gen.value_iter(rnd))
            .filter({(cp) =&gt;
              // excluding surrogate pairs
              (cp &lt;= 0xD7FF) or (cp &gt;= 0xE000) })
            .take(size)
          let s: String iso = recover String(size) end
          for code_point in gen_iter do
            s.push_utf32(code_point)
          end
          s

        fun shrink(s: String): ValueAndShrink[String] =&gt;
          &quot;&quot;&quot;
          strip off codepoints from the end, not just bytes, so we
          maintain a valid utf8 string

          only shrink until given ``min`` is hit
          &quot;&quot;&quot;
          var shrink_base = s
          let s_len = s.codepoints()
          let shrink_iter: Iterator[String^] =
            if s_len &gt; min then
              Iter[String^].repeat_value(consume shrink_base)
                .map_stateful[String^](
                  object
                    var len: USize = s_len - 1
                    fun ref apply(str: String): String =&gt;
                      Generators._trim_codepoints(str, len = len - 1)
                  end
                ).take(s_len - min)
                // take_while is buggy in pony &lt; 0.21.0
                //.take_while({(t) =&gt; t.codepoints() &gt; min})
            else
              Poperator[String].empty()
            end
          (consume s, shrink_iter)
      end)

  fun _trim_codepoints(s: String, trim_to: USize): String =&gt;
    recover val
      Iter[U32](s.runes())
        .take(trim_to)
        .fold[String ref](
          String.create(trim_to),
          {(acc, cp) =&gt; acc.&gt;push_utf32(cp) })
    end

  fun unicode(
    min: USize = 0,
    max: USize = 100)
    : Generator[String]
  =&gt;
    &quot;&quot;&quot;
    create a generator for unicode strings
    with a minimum length of ``min`` codepoints (default: 0)
    and a maximum length of ``max`` codepoints (default: 100).

    Note that the byte length of the generated string can be up to 4 times
    the size in code points.
    &quot;&quot;&quot;
    let range_1 = u32(0x0, 0xD7FF)
    let range_1_size: USize = 0xD7FF
    // excluding surrogate pairs
    // this might be duplicate work but increases efficiency
    let range_2 = u32(0xE000, 0x10FFFF)
    let range_2_size = U32(0x10FFFF - 0xE000).usize()

    let code_point_gen =
      frequency[U32]([
        (range_1_size, range_1)
        (range_2_size, range_2)
      ])
    utf32_codepoint_string(code_point_gen, min, max)

  fun unicode_bmp(
    min: USize = 0,
    max: USize = 100)
    : Generator[String]
  =&gt;
    &quot;&quot;&quot;
    create a generator for unicode strings
    from the basic multilingual plane only
    with a minimum length of ``min`` codepoints (default: 0)
    and a maximum length of ``max`` codepoints (default: 100).

    Note that the byte length of the generated string can be up to 4 times
    the size in code points.
    &quot;&quot;&quot;
    let range_1 = u32(0x0, 0xD7FF)
    let range_1_size: USize = 0xD7FF
    // excluding surrogate pairs
    // this might be duplicate work but increases efficiency
    let range_2 = u32(0xE000, 0xFFFF)
    let range_2_size = U32(0xFFFF - 0xE000).usize()

    let code_point_gen =
      frequency[U32]([
        (range_1_size, range_1)
        (range_2_size, range_2)
      ])
    utf32_codepoint_string(code_point_gen, min, max)


</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="src/ponycheck/ponycheck/" title="ponycheck.pony" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                ponycheck.pony
              </span>
            </div>
          </a>
        
        
          <a href="src/ponycheck/for_all/" title="for_all.pony" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                for_all.pony
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.f4eda793.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>